/*jshint  esnext:true*/
const DESC_MAX_LENGTH = 140;
const NP_LOGO = 'data:image/jpeg;base64,/9j/4AAQSkZJRgABAQEARwBHAAD/2wBDAAMCAgMCAgMDAwMEAwMEBQgFBQQEBQoHBwYIDAoMDAsKCwsNDhIQDQ4RDgsLEBYQERMUFRUVDA8XGBYUGBIUFRT/2wBDAQMEBAUEBQkFBQkUDQsNFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBT/wgARCACMAIwDAREAAhEBAxEB/8QAHAABAAICAwEAAAAAAAAAAAAAAAYHBQgBAwQC/8QAGwEBAAIDAQEAAAAAAAAAAAAAAAUGAQIEAwf/2gAMAwEAAhADEAAAAdqQAAAAAAAAeXx9PH4dOU7OHzePt1a7+/p5uWQAOvVi+Lvy/fwcgAjURL0n8++l7BfUPkWAjJfDR8lYlqqHLPGH3kPkxfH2VvUrpbl6+fcYzyfWQjcPMVNSr7I5aGls5AYePkpbO16m6D9G+cZsy30jJdnFUFE+idu+mbkY2c2Oq1PSfoHLW3r18/z8lFxuHmIpDzmAjZWSy0N2MePx6JDLQshlIim6B9Hz8lFSqcgMj1ctdVS49eu3Z6eP2fey2LtQ43ETEVh5yZT1ao3539Sse1U3o898p28MhlIiqaTfs9JxOckovKdfFAqxbW2nr9ufLSEfnO+NkMpF4KNkcDGy85sdWriqXHJ9nFJpiEqekX7r8/SybdSvb081U0m+93p556TiZhO16raZeuvXa27z8/yfVygADjGDI5yAAA4GHOQAHGHTqrWo3SwbRUsh0+AAAAAEWKKBJWLt89qopH0Cz7dSMp28oAAAAFclaFyFIlgGVJ7jFd5zjycEkIqRM9ZZR9AFclbFxFHFjlPG0xpCX2VEbemoBbhR5vGdoBXJrkTQl5dRqabTGrZtqahGwxTpswakG2h2gFcsQxm9wcmpBtMavG2JqQbPGopfZrubunaAR0w5OTk+SqyzCti0Sqy0iAEHKfN1zsAAAAAAB5TUQtIvI5AAAAAABwDkAAAAAAAAAAH/xAAtEAABBAECBQMDBAMAAAAAAAAEAgMFBgEABxARNDU2EhQwEyAzFRYXMiNAUP/aAAgBAQABBQL/AEniEDtjSgpi+enyWxmxTmDMfcpWE4HlGCiPtn+1AFqBKGISUxZe1U7psa5658eepDoqf1mueufGwdqBjfegVWS+k5Ze007ppM9McKp86afcHPicwEz+ptS8jiMEx7+ZcVmQicU/q5qUxGDJwfNOZTIQrkPI4khdWDtVO/pPgKjTzpDEjXad01yczqtjJZjCmEEj15WWJm5LzzrrCW4qUbSsCn9XcHM++i7GPHByVkHkA6Y5nD2rB2qnf0lAUyAn1HA9U7pbiznKKuch0CRObBGrTSiJW4t55VkxD0bMFtDgU/q7ixnBURER8gK7XY1nEdEDx69S47hUfWo0kBOrDAOlu1uPIAYMEQaw9WJAZ3NelSVREQmLYkQEyA2a5JiuJrciTquRJYBElHpkRlVuSFczBShLoA+RRvu565/Dy+DOfTgi3eggMlJg/wAdkllwkV/LJuv5YN1EbotEOpUkll6pEe4jxMAi/HfvGtt4kORE/a0VrcCqCxg+25qyoGQuwEbJ5cwhoTcGLLId3OiGnIewBTrepqzAQSRdyogp5+/xrEjjPPHG/eM7bSwUcGu0xKcbgWwaVY25j1hQNt82d7eLHuSsyrawP20I4RW7ScYkOPjQCLpPF7WCqYSA9Fzzf4+N+8ZrtQfsbKdqTMqh9sRg3UIw0m2+bO9voiMKt2rQ3hF3tXjO1PXatHnDX4+N+8Z2q6LXLhbfNne30Ly3Vr82OE99FQEq5UZsjcmKbHclFTFja/HxnInE3HVirorLPGUobcpMKZ9TEHRGoSU1J0JuTmU49KbBSwJ9be2kcDn/AAmWtvHJHzPI+o0fXp8kym0RcWR/x//EADYRAAEEAQEEBgkCBwAAAAAAAAMAAQIEBREGEiFBEBMUIjEzICMyNEBRcYGRFbEkQmFwocHR/9oACAEDAQE/AfghCmaW4NtXdGpWK7bxYadAQkPLcG2ro9Y1Z9Cx09Nmd/BFpGCLrSNp6WJ43IKzXjaC4pIwZAI45txZYX3yK2j82OvRxWnoU2/iIO/zW0Xkx9LEe+QVq52ayOEvZks9S6yHaR8v2WE99ito/NgqVSVwzDZMKlix95QNSyPc4OstjexS3oey6x9KV4zD5c1LsWMizaaKPYb+k4+LflbRN6mLrGUe3F0fwbxUnp4yOkuDJnpZOO7HishTekbc5dGI98gtpPaGsTbjdA4ieLKrUellGhyW0XmQWzcG781mjSLclF/BkAkhEacVl2YlB5S+q2bi2k5LMEclyTPyVCUoWIbvzW0fkxdbOQZq8pf1V3CntmcvWcPuqeFPUPEzEbgto4NuQn0Yj3yC2k8YKjalUMxIrcHYeB2+y2k86K2dKzSmN1nKsx2XLp3XVSrOyVoRZZokQ0+r+a2cI2sxrN15jtSnpwdY6uQtiLwitovJitnCs45C56rIZG/UO7fyoeYyBH0h+yt5A9uLRNy6McWALMSEfRmWbuAtvHqZa6fXow+VhXh1NmXD7rNWw2iRkCWv5/2q551iMUaFmqRoev4P9NU2XxoG9U/4Z1kb0rxNeSqWZ1CsSKbMY88fW/5Z0+Zog7oP2dZq/XtijEEtX+//ABU7UqZWJFNmMeeGhvw7O6/VcdXhvBf8MrRonNIkW01+JZt591B2daQ2ckuKOCVYrjly+Ai+jtJC2gD1ffbvK0d7RnM/P+zf/8QAMREAAQQCAAMFBwMFAAAAAAAAAgABAwQFERIxQRATFCEzFSAjMjRAoSJhsUJRcIHB/9oACAECAQE/AfspJQhHiN9KK5BO+oy2/ZJMEI8Uj6ZRWIp23G+/fd2ZRXYppO7j97KfSkq9h68jGLqKUZgYx6rL/SusD6Za7d+5Zf4BLBeqXZyW99uV+kJV6viIDMebLC3O7Lw5cn5LLtuoSwHnGSt2RqRcbp5LV89M+0UVui7HyWMv+LHR/MyvW2qRcfXom8VkH2z7T+MpbB+SwXnISyFzwkW25pmt5AvLzTjbx78XJULbW4uPr2ZX6QlgPlNZKqVOfvI+Tqez4rHcfVYD0yWfN24AWIhGOsxNzdTRNLG4GsY7x3GZlnyfYCsSDBVF26q6IlAW2WB9Ylnid5xH9lTy8NaJo+B9q3lobULx8DrAE/GQ9mV+lJYD5TV2s1qJ43TlJBxwusD6ZLPRu4gaw9oTrtHvzZWrA143MnWIjKS3xrPxv+g1h5hKsIdWV6YAgLbrA+qSz0b96J9FRoU7UTF/UjxVKP5/5VShDVdzi69l6I5q5ADbdYipPVYu9HXZlMYcxtLAPmsRVlqg7StpTwjPG8Z9UeItxH8FvyvZd+UviN+WVCk1MNdVarDaieMl7JvQnuJvyy9lXp/1TfysTSsVpHeYdN/r/it1htx8BJ8TegPcP8r2belPUjflV4XhjYSf7l/JtqXOuJuwD5KCZp4xkbr9gTbZ2/upMJN3mh5KtD4WJovsP2/wX//EADsQAAEDAgMEBgULBQAAAAAAAAEAAgMREgQhMRNBUXEQICIyQmEUYnJzkhUjMDM0QIGCobHBJFBSU5H/2gAIAQEABj8C+5F8jrWDerYZmvdwHRfI6xvEomGQSAcOvU6J0MTr3N1I603JMmbu/VMkZmHKRS8+nXqTeypeXWm5Kd7B85HmjhZDke7zUil5p0rvwCNtx8hoFtDfH5g1RbJlM39UZfH4QiQXP/YItfcGO1ropeSuGchyaESLpDzoAg83M/YoP0eMnDom5KdCaPJjjUeRTpB3tHBS81Azdqo3Adp+ZKfG8VaQmtHmFA3dqoqeLMqa4V7O9S8lGzcGVTIdg8kauyzUkOweCdCVMzcR0TKdPiOu48CpsO7fkQpeahlpkMimw1G0j3J73kaZBB+5tTVQSbtEyO7tsyIUt7wCRQKXkoptxbamuP1niFV2zTm5F0Ncxx6JI423PO6ql9Ijsrp2gehs2GZc495tQFI2ePZkniCnRPGRVcOLxuLXgFASty4vkBVNZDq5Oidv0KOxbX1mvAROI3aVcCU908VjSMjcCjE78DwR2LbvWY8BBszXD1nOqEyNzry0d77ySiI4qxg6lMmbo4fSS4uNgkczwuX2LD/EV9iw/wARQjxsAgrlezMBXNNzHDIhEMc0x11UcI8P0mIWJOJgZMQ7K4L7DF8KjxuEbswXWuYrHmuydQHyXoMrJjNWnZbkjJ4aXJ8XzkVlaukbQIspO/1mtyRdhZbiNWnUdH9TL290bdUI/nYa+KRuS9DpM991tzW5IHqYhYgYrFRwEuyEjqKvyhh/jUeDwjto0Ouc/cg+QUMrrgPJD22p/u/4XosXekkIVoxD9vTvbq8lHE40c2TZycCFLiToxhcn3PPa7b3nwhEYed7JeLswosNP9YyQApvLqYhSPilbGGHxLPFxAcbU2TGTek26NGQTWtFGjIBD22p3u/4R9W49DqeKQFYn3axfu+j87U3l1MQsV7XUHttTvd/wn/m6PzhSwf5xUH/E8yMJAOzkb5Ivjc6SSmUdFHi3gAvlGQ3JvLqPwjpDEHeIKSNk7p7zWrhTqfKDsW+N1QbA0Ix+rbVHGtxb5Sa9kt6PlA4t7HVrYGoDgto+sM/+xi22JxrpIW5lp7KY3BtpAZwIwOCaPL6d7QbS4EVUsDo8TOxriA9+hQxuOpth3IxnT+0f/8QAKBAAAgIBAgYCAwEBAQAAAAAAAREAITFBURBhcYGRsSChMMHwQNHh/9oACAEBAAE/If8AFrZocIBUHBYZDhzDK2AyC/kVEQZMX5DwI/jWAmqe+TaGyAT6QeG5RBkqKcBxIDVdYQOPK3PNkZiDJUAHBfwIj4Mg3EpcK202QG3fgeSgVuGA1nLkCB3ZI7xkhkqk6SiRKiamPY2zagM4Ksi8XmEGJcyYWZVy3Ba+wB4kIIVqI1F9juTDRWwMwdZQ5uVcOsrgBFkDCS0W8xLfq4Ru2JvcDwVIjZNHF3YDqzNIVo2OHwMXBRjDMQrgXhn3BAs7pCTwF/vvO8kNSJjyIXAqCRtRhFqLMWUpLBwgdiMRIG6iVILHZMKFUPdA/wDsb8U0NwGJhwGQV4FRbDgudUED3Bu2e4eCYqga9YXcWRL8SAXPBMaaGunOEaH/ANZKExJoIeCYqdb+qUf5bB0ha2498IlmgQocfcrth+gEwOKOd9CUYNGXyRMJ4Kauzh9qxvmm8SMfgIGL5GCIUBZhQYq1jNcXfkTRywo+JRJrJ7EWenZJW51gZbfCIMYEGBZAhCWAz+TP6fuBaiBOUOXwjK0DjGMiMmMph7B2lbiOAuebhSNesk4665DArm4IitJkvuCKbHdYRwCWCDsGOkMcupAexjnUgCJvUFxWYIfw9WUjNC0s6WgGUA6Ysdh5hoBojwM/tbzTb4w3fNrLj1Ky3ANojgbGTMYhXqUxM26bDkzqkQnaBNFEWM6T6718PVi08ijgkOcgwgAyYbTzi6lQ0E/rbz7+C+ckHyeGsgv3MLxvUVbtK7iZ5x0Jx+6fTevh6P7n18FwtHF/qzC8uPsexjgf33glTJnb4TToqxLaeJZRYBAvZwuJQaRz6f18NHUazAGRwFPEA4K4O2ZaBR3jJKB+gpgcE4AZ3ilUQpSK5zXEAAzMR2tU9RrFV6jArqDCiY9FWqEOZAD850cIGlZjMfWqdEGFkMNlOcwY/OuC/wA3/9oADAMBAAIAAwAAABCSSSSSSSSS682SSUSSR0zcfII2kT0lDP3KsQT3hKTYIVpSXy2hzdWzTx/ivR8IkSSQfaSSSTSCTcgSSSSQAA7cAQACQASUcCSCSQQSAAAQSSQQAQSAAASQGSACSSCSQSQSSCAACSSSCSSCASSSSSSSSQCSSSSSSSSST//EACoRAQACAgECBAYCAwAAAAAAAAEAESExQVFhEHGBoSAwkbHR8EDxUGDh/9oACAEDAQE/EP4QfsBLqB1dSziA7Z0gF1+sG/ixIt4OYKoFqufiuKahko7PD+ZUswefc85VgavXZKbgLRFGXXjS5InKUlATrPOAupSZfHY7y+PAvT+5SBbg1zGzMPImjN29CAGhWLQVhVbOiAvkzYrr7P7qaCHK6fvESQCu1veK8DkNFvKB5qJrtyDQPSV/MeIY6oEjzkyPbw9xLFHeZcipOpx/2PAytH96QubpFK7wRgNIEd2kZlwceqL5bGExQD0IJKr4TTdZynV9iOQW0Vh7R4AWQGdcLfD3E25iezT3O823TK7OyUROCMDS1UAb2jssI3iuWsRmHKD6S+N7JeXhp41E8NNv9wh50Yzhb0/SAmjg1f1YqyO7p+ImZ6Kb8OUwtv2uYfu2B9wm9x/QGRpelAyrhDOB9hEIpJRvKKF+gxG5Ogn3AnDJ0TKXWyDR09EHsMogw7oD3BlZGclD7ia+9J1IKWv6Ag+8vgI4pB+iGJQRcPjump3+Tzfx7iDy4lNVl1GGuNfOdRCNjcr1KHSG5VtfPuo1sjnJiV/kD/Wf/8QAKREBAAIBAwIFBAMBAAAAAAAAAQARITFBUWGhIHGBkbEQMNHxQHDB8P/aAAgBAgEBPxD+EwrDmNz9CXGVQ5jrD8eO0tqi72jJLQvxUHJVWp7R77Oz9aRpM2vKGlxa3lFreXOksNYRW2Uy+fj6WaoDR4G+WZ/z2gKleweIliLL5jnX2OsfoWtGAiQv1NestPzRzFu5gc3+JYoV5NiNCojfJ7x+ihM+ekZ3eXBAKvKt6gPYwnX6mqDpiECprOjufiE1sMJ/3aPD1hQaXcI7VV31mbASb3qjBD0CARuv3mXqjeKzOJtlB8sBvUFR52Oi1iDt4r6ZH0isus4DLOjDcIcJ1NGY07sOBg7ecSA0q0xcGgJpn/IQRgFfOIAMby1JkxedYfHaUfqPP0hQmir8v3GJbuzXsQYyB6r+ZZTXJv6XVk6f7UErDpkb9lmmkv5LCWHk5SW/y4yPws0cuyX6w5APdInPqKfCzdx6s3gt45CdQHukGq5NLC+mUJeZDW1njJikvJ4lEL6gPlImI9Q9xZd0Tx2Sy6lmen2aPE4zENt3gBEQOa/gAQ0whkpeCE3R9/WdkL0lB/RP/8QAKBABAAICAQMEAQQDAAAAAAAAAQARITFBUWGBEHGRobEgMMHRQOHw/9oACAEBAAE/EP8ACPoC9UlwJBG68kyIzs/6RFb9VzD5g/qUEpaOAJhaHGPa4Wa/SrIbA3EwIkjfV+Gu8MIcg2p2Psyw8FJV+ZXKFV0VLFWJcHuahhIeg+l95SCV3RmGg9NPibzlFt8zBfUaoKeFmkUcDc5PWFcEn3UWfzL06Z87LzFThQbv3mROqygZBtU14+4ylbLKdXpM3w2KGEAGxxcSLPvENhOa8fV3ANKgHz6v+GMzKV7nf/cdBkrBfMVVJVdeqdIF0K2dgPHmIHiDe7ovMpixC+X2c+sIyxQ3yYmLwHUWWFOufmIgA2Wky+zmezC4iWO7HVRP4h5bPJyAfERg0BfG5ZEYd4RPxOgQDulRlCrnVYy84hQYgLt1OkwDLrfMUtBAvkFwkmlDCLPwkvhnXl+8MG7sdwl/36ENJQUSm/EFCkWGjT8ROK3ZLgfeYqXaNxPSGGlWX5ZY1aiJNj9ysYI2lNAR1dAsPA+9R0SJmjFl+6zOVQIbLYeYUtPLI7ELnFDr3iMbWLpQwZBKW0ey+kXgkDncBcDqZEQ6nX0dtv0fKCV4OpY07SLVjLBLlsLxYnW5WRfCDrcils8HK4EKkvEI72+kPXbHtgFR4hrIz2doR+sOyyvmPWF2LTqiiP20i6cBSDyxnFzHL7TGqfABeJlmIZiHcQeIrJABjI2gONb+ZePU5O36riHCIbSDNX+xsQYA0etnqsPWYbza9KipSNdG0mNmpHh5ho/adRdFUAuv3cQEWGclNfcOIeCyytWNqRxY4cNG4fU5iwtnhuX1mTcrTMJ2e5cr8y8Fwbl+lwblzfq6YEvUjrzApMJVeYI5LeCfiGg5B9pA0a1D9lXG30gJYJXXYUZB+oVdmgNGg613l9WJxOnBLbrEBQP4GHP6lcekZb7n4lQziiIGA09cyK8xLZQO3gU/BCyynfVbFO9Q7wCF7yX6up9/8WCY6qh6gxa29S/FwNmmoRB+WreJv0oR/YG50NXpdzcqZuBlkmZmDMXtR5ZwIXxrfRBKtqDAUG2oowCGoVPxK6SY3NoBeawAdZThF2qw1kVbzmCdPisDBXif9Po9XU+/+LC0BPKYtWXaAeLzAbH6XxLlrswqZOjDiYl0DE8nP92Al82VfhlZfjvDJXhDn/RGGBxiDsjv7374a3fME5bFMSvLPn33Pcf1vV0xlN8/jBtOODmUo81qFkyha4JRS4yNczcQ7KeHa4bExmhkF5uUF3nvdZRSk5ajovlj1vBKXBt3D3IzC6GHZUYejE3P5Zqk/wCb0erplciFCVdn3hjkoX5mUceZxLFqKrfMDiEJa4FNy4lLlacldYg7FnRKUbxcwqiq4OYf5wYpayuKHgnko3FezdIHuAu6zNazcGaUP9x1D2ugLUahEUo8B+86icVX5ajyNwmpBUaMrYlOJctdcJql6nTiFBf3+/8AbrEgDRXEMH+L/9k=';

class Script {
	process_incoming_request({request}) {
	  const data = request.content;
      let label = data.label;
      let updown = data.event;
      let target = data.target;
			let message = {
				icon_url: NP_LOGO
				, attachments: []
			};

      if (updown == 'down') {
        message.attachments.push({color: '#F30', text: label + ' (' + target + ') is DOWN!'});
        }
        if (updown == 'up') {
          message.attachments.push({color: '#038', text: label + ' has RECOVERED!'});
          }

      if (message.attachments.length) {
		return {content:message};
      }

	}
}
